<!DOCTYPE html>
<html>
<head>
  <script>

  redir = '';
    
  function findUrlParameter(parameterName) {
  let result = null;
  const searchParams = new URLSearchParams(location.search);
  if (searchParams.has(parameterName)) {
    result = searchParams.get(parameterName);
  }
  return result;
}

function redirectUrl() {
  const idToken = findUrlParameter("id_token");
  const accessToken = findUrlParameter("access_token");
  const appLinkScheme = "sashimonoapp";
  const appLinkAuthority = "#"; // auth.myapp.com
  const appLinkUrl = `${appLinkScheme}://${appLinkAuthority}/google-auth?id_token=${idToken}&access_token=${accessToken}`;
  console.log(appLinkUrl);
  redir = appLinkUrl;
  return appLinkUrl;
}

function redirectToDesktop() {
  const idToken = findUrlParameter("id_token");
  const accessToken = findUrlParameter("access_token");
  const appLinkScheme = "sashimonoapp";
  const appLinkAuthority = "#"; // auth.myapp.com
  const appLinkUrl = `${appLinkScheme}://${appLinkAuthority}/google-auth?id_token=${idToken}&access_token=${accessToken}`;
  setTimeout(() => {
      window.location.href = url;
  }, 100);
}
</script>
</head>
<body>
<h1>Auth redirect page</h1>
<p>Google Sign In redirected you here.</p>
<p>You will be redirected to the application soon</p>

<button onclick="alert('redirect now!\n' + redirectUrl());redirectToDesktop();"> BACK TO SM</button>
<a href="javascript:window.redirect(redirectUrl())"> BACK TO SM LINK [<script>document.print(redirectUrl());</script>]</a>
  
</body>
</html>
