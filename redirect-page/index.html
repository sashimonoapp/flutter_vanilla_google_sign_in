<!DOCTYPE html>
<html>
<head>
  <script>

  redir = '';
    
  function findUrlParameter(parameterName) {
  let result = null;
  let url = window.location.href;
  url.replace('#', '?');
  console.log('findUrlParameter//url: ' + url);
  const searchParams = new URLSearchParams(url);
  if (searchParams.has(parameterName)) {
    result = searchParams.get(parameterName);
  }
  return result;
}

function redirectUrl() {
  const idToken = findUrlParameter("id_token");
  const accessToken = findUrlParameter("access_token");
  const appLinkScheme = "sashimonoapp";
  const appLinkAuthority = "#"; // auth.myapp.com
  const appLinkUrl = `${appLinkScheme}://${appLinkAuthority}/google-auth?id_token=${idToken}&access_token=${accessToken}`;
  console.log(appLinkUrl);
  redir = appLinkUrl;
  return appLinkUrl;
}

function redirectToDesktop() {
  const idToken = findUrlParameter("id_token");
  const accessToken = findUrlParameter("access_token");
  const appLinkScheme = "sashimonoapp";
  const appLinkAuthority = "#"; // auth.myapp.com
  const appLinkUrl = `${appLinkScheme}://${appLinkAuthority}/google-auth?id_token=${idToken}&access_token=${accessToken}`;
  setTimeout(() => {
      window.location.href = appLinkUrl;
  }, 100);
}

redirectToDesktop();
    
</script>
</head>
<body>

<h1>Auth redirect page</h1>

<p>Google Sign In redirected you here.</p>
<p>You will be redirected to the application soon</p>
  <p>
  Current URL: <script>document.write('url: ' + window.location.href);</script><br><br><br>
  Redirect URL: <script>document.write('url: ' + redirectUrl());</script><br><br><br>
  <br>
  </p>
  <hr>
<a id="myLink" title="Click to do something"
 href="#" onclick="window.location.href(redirectUrl());return false;">BACK TO SM</a>
  
</body>
</html>
